\chapter{Active Directory server rollen}

Welke vragen moet men zich stellen na de initiële installatie van een Windows
Server toestel, in veband met bijzondere functies die de server kan vervullen
met betrekking tot Active Directory? Formuleer bij het beantwoorden van deze
vragen telkens (voor zover relevant):
\begin{itemize}
	\item Hoe bepaald wordt welke servers een dergelijke specifieke functie
		vervullen?  Hoeveel zijn er nodig (in termen van:
		minimaal/exact/maximaal aantal, in functie van ...), en waarom?
	\item Eigenschappen zoals bedoeling, noodzaak, kriticiteit, inhoud,
		synchronisatie, voor welke Windows versie(s) van toepassing,...?
	\item De eventuele relatie tussen de diverse functies. Vermeld
		bijvoorbeeld welke functies al dan niet door dezelfde server
		kunnen vervuld worden, of misschien juist wel door dezelfde
		server moeten vervuld worden.
	\item Op welke diverse manieren men de toewijzing van elke bijzondere
		functie kan instellen, wijzigen en/of ongedaan maken?
\end{itemize}

\section{Wordt server al dan niet opgenomen in een domein?}

Als een Windows Server toestel lid is van een werkgroep, niet van een domein,
dan wordt het een zelfstandige server genoemd. Deze profiteren niet van de
voordelen die AD biedt. Vooral indien er reeds een AD domeinstructuur aanwezig
is, is de keuze snel gemaakt.

\section{Vervult de in een domein opgenomen server al dan niet de functie van
domeincontroller?}

Een in een domein opgenomen server die de functie van domeincontroller niet
vervult, wordt een lidserver (member server) genoemd. Meestal fungeren
lidservers als file servers, toepassingsservers, database servers, web servers,
firewalls, routers of een combinatie hiervan. In Windows Server 2008+ worden
dergelijke functies gegroepeerd op drie niveau's:
\begin{description}
	\item[Server rollen] (DNS, DHCP, ...) en Web Server implementeren
		primaire serverfuncties.
	\item[Role services] optionele, meer complexe, server rollern.
	\item[Features] (Powershell, SNMP, backup, ...) zorgen voor meer
		ondersteunende functies.
\end{description}
Men kan aanvullende server rollen, rol services en features configureren via
respectievelijk de Add Roles, Add Role Services en Add Features wizards van
Server Manager. Dit kan ook met de ServerManagerCmd opdracht.

Zowel voor lidservers als voor domeincontrollers gelden groepsbeleidinstellingen
die gedefinieerd zijn voor het domein, de OUs of de site. Lidserver behouden, in
tegestelling tot domeincontrollers, een eigen lokale beveiligingsdatabank, de
Security Account Manager (SAM).
Doorgaans configureert men slechts een factie van de Windows Server toestellen
als domeincontroller. Minimaal 1 per domein.

\section{Indien gekozen wordt voor domeincontroller, moet ook de functie van
globale catalogus ondersteund worden?}

Indien er slechts een domein in het forest is, mogen alle domeincontrollers tot
global catalog server worden gepromoveerd. Om het replicatieverkeer te beperken,
zorgt me er best voor dat er steeds een global catalog server per site aanwezig
is. De promotie gebeurt door de global catalog optie aan tevinken in de general
tabpagina van de properties van de NSDS settings van een domeincontroller. Dit
is terug te vinden in de AD sites and services snap-in. De global catalog server
heeft een kopie van alle objecten van de domeingegevens van het domein waarin de
global catalog server zich bevindt, en een kopie van een subset van de
eigenschappen van alle objecten van het gehele forest. Deze subset wordt enkel
gerepliceerd tussen GC servers. Verder bevat de GC nog een kopie van de
configuratiegegevens van alle domeinen in het forest, en het unieke schema van
het forest. Eventueel worden ook nog specifieke applicatiepartities bijgehouden
in de global catalog.

\section{Welke domain controllers worden als RODC ingesteld?}

Domeincontrollers configureren als Read Only Domain Controller is goede praktijk
als de fysieke beveiliging van het toestel niet kan worden gegarandeerd, of waar
specifieke interactieve toepassingen enkel op een DC kunnen worden uitgevoerd.
Een bijkomend voordeel is dat het replicatieverkeer in één enkele richting
wordt beperkt. Er kan ook nog configuratie van een filtered attribute set (welke
kenmerken worden gerepliceerd, en welke niet) en een password replication policy
worden geconfigureerd met credential caching voor specifieke gebruikers en
computers. RODC's kunnen tevens de rol van GC en DNS server vervullen. In het
geval van DNS gaat het over een ordinaire secundaire nameserver. Een RODC biedt
ook ondersteuning voor de operations masters rollen. Er geldt wel de beperking
dat een RODC enkel met Windows Server 2008 DC's gegevens kan repliceren.

\section{Welke domeincontrollers vervullen de operations master rollen?}

\subsection{Rollen uniek in elk domein}
\begin{itemize}
	\item RID master
	\item PDC emulator
	\item infrastructure master
\end{itemize}

\subsection{Rollen uniek in het forest}
\begin{itemize}
	\item schema master
	\item domain naming master
\end{itemize}
